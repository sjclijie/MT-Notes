define("MT.SPM/0.0.2/src/page/demo-bg-video",[],function(e,t){function n(){u=$(window).innerWidth(),d=$(window).innerHeight(),console.log(u,d);var e=document.getElementsByClassName("promote-btn")[0];e.onclick=function(){location.href="http://vzhibo.tv"}}function o(){c=$(".flash-player"),p=$(".html-player"),$("html").hasClass("video")?(l(),c.remove(),p.show()):(a(),p.remove(),c.show())}function l(){function t(e,t){return Math.floor(Math.random()*t+e)}var n=r+i[t(0,4)].name+s;console.log(n);var o=$(".html-player"),l=$(".html-player video"),a=document.getElementById("html5-video");m=e("MT.SPM/0.0.2/src/components/html5-player").create(o,l,a,{videoUrl:n,display:{all:!1}}),m.init(),m.resume()}function a(){c.find("object[name=index-player] param[name=flashvars]").attr("value","name=a"),c.find("embed[name=index-player]").attr("width",u),c.find("embed[name=index-player]").attr("height",d),$(".html-player").before(c)}var r="http://img.vzhibo.tv/introduction/",i=[{name:"a",point:[0,2,5,15,30,50]},{name:"b",point:[0,2,5,15,30,50]},{name:"c",point:[0,2,5,15,30,50]},{name:"d",point:[0,2,5,15,30,50]}],s=".mp4",u=0,d=0,c={},p={},m={};t.init=function(){n(),o()}}),define("MT.SPM/0.0.2/src/components/html5-player",[],function(e,t){var n={create:function(e,t,n,o){var l={},a={},e=e,t=t,n=n,r={videoUrl:"",display:{all:!0,playControl:!0,muteControl:!0,fullScreenControl:!0,seekControl:!0,volumeControl:!0},control:{autoplay:!0,preload:!0,loop:!0,progress:!1,volume:!1}},i={};if(o)for(var s in o)s in r&&(r[s]=o[s]);i=r;var u=o.videoUrl||"";return a.updateContainerSize=function(){e.width()},a.addPlayerControl=function(){var t="";t+='<div class="video-controls">',t+='<div class="controls-container">',t+='<div class="play">',t+='<a class="button" id="play-pause"></a>',t+="</div>",t+='<div class="progress">',t+='<input type="range" id="seek-bar" class="seek-bar" value="0">',t+="</div>",t+='<div class="mute">',t+='<a class="button" id="mute"></a>',t+="</div>",t+='<div class="volume">',t+='<input type="range" id="volume-bar" class="volume-bar" min="0" max="1" step="0.1" value="1">',t+="</div>",t+='<div class="full-screen">',t+='<a class="button" id="full-screen"></a>',t+="</div>",t+="</div>",t+="</div>",e.append(t)},a.updateControlStyle=function(){var t=e.find("video").width(),n=0;i.display.volumeControl||(e.find(".video-controls .mute").hide(),e.find(".video-controls .volume").hide()),i.display.volumeControl?(n=t-108-20,e.find(".progress").css({width:.6*n}),e.find(".volume").css({width:.35*n})):(n=t-72-12,e.find(".progress").css({width:.99*n}))},a.controlHandler=function(){if(i.display.all||(document.getElementsByClassName("video-controls")[0].style.display="none"),i.display.playControl){var e=document.getElementById("play-pause");e.addEventListener("click",function(){1==n.paused?n.play():n.pause()})}if(i.display.muteControl){var t=document.getElementById("mute");t.addEventListener("click",function(){0==n.muted?(n.muted=!0,t.style.backgroundImage="url(/public/images/player/player-mute.svg)"):(n.muted=!1,t.style.backgroundImage="url(/public/images/player/player-unmute.svg)")})}if(i.display.fullScreenControl){var o=document.getElementById("full-screen");o.addEventListener("click",function(){console.log("RequestFullScreen"),n.requestFullScreen?n.requestFullScreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullScreen?n.webkitRequestFullScreen():n.oRequestFullScreen?n.oRequestFullScreen():n.msRequestFullScreen&&n.msRequestFullScreen()})}if(i.display.seekControl){var l=document.getElementById("seek-bar");l.addEventListener("change",function(){function e(t){return n.seekable?(n.currentTime=t,!1):void setTimeout(function(){e(t)},500)}var t=n.duration*(l.value/100);i.control.progress?n.seekable?n.currentTime=t:e(t):console.log("Live, no seekable")})}if(i.display.volumeControl){var a=document.getElementById("volume-bar");a.addEventListener("change",function(){n.volume=a.value})}},a.playerHandler=function(){function e(){if(console.log(s()+" Player.Playing"),i.display.playControl){var e=document.getElementById("play-pause");e.style.backgroundImage="url(/public/images/player/player-pause.svg)"}}function t(){if(console.log(s()+" Player.Pause"),i.display.playControl){var e=document.getElementById("play-pause");e.style.backgroundImage="url(/public/images/player/player-play.svg)"}}function o(){console.log(s()+" Player.Play")}function l(){var e=100/n.duration*n.currentTime;if(i.display.seekControl){var t=document.getElementById("seek-bar");t.value=e}}function a(){console.log(s()+" Player.touchStart"),document.getElementsByClassName("video-controls")[0].style.opacity="0.9"}function r(){console.log(s()+" Player.touchEnd"),setTimeout(function(){document.getElementsByClassName("video-controls")[0].style.opacity="0"},2e3)}function s(){return(new Date).getTime()}n.addEventListener("play",o,!1),n.addEventListener("pause",t,!1),n.addEventListener("playing",e,!1),n.addEventListener("timeupdate",l,!1),n.addEventListener("touchstart",a,!1),n.addEventListener("touchend",r,!1)},a.updateVideoSize=function(e,t,n){function o(e,t){var n=null;return function(){var o=this,l=arguments;window.clearTimeout(n),n=window.setTimeout(function(){e.apply(o,l)},t)}}function l(){console.log(new Date);var o=e.parentNode.offsetHeight,l=e.parentNode.offsetWidth,a=t,r=n,i=o/r,s=l/a;s>i?(e.style.height="auto",e.style.width=l+"px"):(e.style.height=o+"px",e.style.width="auto")}document.addEventListener("DOMContentLoaded",l,!1),window.onresize=function(){o(l(),50)},e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style["-webkit-transform"]="translate(-50%, -50%)",e.style["-ms-transform"]="translate(-50%, -50%)",e.style.transform="translate(-50%, -50%)",e.parentNode.style.overflow="hidden"},a.updateVideoUrl=function(e,t,o){function l(){console.log("updateVideoUrl.playingHandler"),n.removeEventListener("playing",l,!1)}function a(e){var t=500;return 0==n.readyState?(setTimeout(function(){a(e)},2*t),!1):null!==n.currentTime&&n.duration>e?(console.log("TO SEEK"),n.currentTime=e,o(!0),void 0):(console.log("Wait for data ... biu biu biu ."),setTimeout(function(){a(e)},t),!1)}if(e){var r=n.currentTime.toFixed(1);n.src=t,n.load(),n.play(),a(r),n.addEventListener("playing",l,!1)}else n.src=t,n.load(),o(!1)},l.init=function(){t.remove(),t.find("source").attr("src",u),i.control.autoplay&&t.attr("autoplay","autoplay"),i.control.preload&&t.attr("preload","auto"),i.control.loop&&t.attr("loop","loop"),e.prepend(t),a.updateContainerSize(),a.addPlayerControl(),a.updateControlStyle()},l.resume=function(){n.src=u,n.load(),a.updateVideoSize(n,1280,720),a.controlHandler(),a.playerHandler()},l.updateVideoUrl=a.updateVideoUrl,l}};t.create=n.create});