define("MT.SPM/0.0.2/src/page/demo-bg-video",[],function(e,t){function n(){d=$(window).innerWidth(),u=$(window).innerHeight(),console.log(d,u);var e=document.getElementsByClassName("promote-btn")[0];e.onclick=function(){location.href="http://vzhibo.tv"}}function o(){c=$(".flash-player"),p=$(".html-player"),$("html").hasClass("video")?(l(),c.remove(),p.show()):(a(),p.remove(),c.show())}function l(){function t(e,t){return Math.floor(Math.random()*t+e)}var n={},o=r+i[t(0,4)].name+s;console.log(o);var l=$(".html-player"),a=$(".html-player video"),d=document.getElementById("html5-video");m=e("MT.SPM/0.0.2/src/components/html5-player").create(n,l,a,d,{videoUrl:o,display:{all:!1}}),m.init(),m.resume()}function a(){c.find("object[name=index-player] param[name=flashvars]").attr("value","name=a"),c.find("embed[name=index-player]").attr("width",d),c.find("embed[name=index-player]").attr("height",u),$(".html-player").before(c)}var r="http://img.vzhibo.tv/introduction/",i=[{name:"a",point:[0,2,5,15,30,50]},{name:"b",point:[0,2,5,15,30,50]},{name:"c",point:[0,2,5,15,30,50]},{name:"d",point:[0,2,5,15,30,50]}],s=".mp4",d=0,u=0,c={},p={},m={};t.init=function(){n(),o()}}),define("MT.SPM/0.0.2/src/components/html5-player",[],function(e,t){var n={create:function(e,t,n,o,l){var a={},r={},t=t,n=n,o=o,i={videoUrl:"",display:{all:!0,playControl:!0,muteControl:!0,fullScreenControl:!0,seekControl:!0,volumeControl:!0},control:{autoplay:!0,preload:!0,loop:!0,progress:!1,volume:!1}},s={};if(l)for(var d in l)d in i&&(i[d]=l[d]);s=i;var u=16/9,c=l.videoUrl||"";return r.updateContainerSize=function(){var e=t.width(),n=e/u;t.find(".preview,video").css({width:e,height:n})},r.addPlayerControl=function(){var e="";e+='<div class="video-controls">',e+='<div class="controls-container">',e+='<div class="play">',e+='<a class="button" id="play-pause"></a>',e+="</div>",e+='<div class="progress">',e+='<input type="range" id="seek-bar" class="seek-bar" value="0">',e+="</div>",e+='<div class="mute">',e+='<a class="button" id="mute"></a>',e+="</div>",e+='<div class="volume">',e+='<input type="range" id="volume-bar" class="volume-bar" min="0" max="1" step="0.1" value="1">',e+="</div>",e+='<div class="full-screen">',e+='<a class="button" id="full-screen"></a>',e+="</div>",e+="</div>",e+="</div>",t.append(e)},r.updateControlStyle=function(){var e=t.find("video").width(),n=0;s.display.volumeControl||(t.find(".video-controls .mute").hide(),t.find(".video-controls .volume").hide()),s.display.volumeControl?(n=e-108-20,t.find(".progress").css({width:.6*n}),t.find(".volume").css({width:.35*n})):(n=e-72-12,t.find(".progress").css({width:.99*n}))},r.controlHandler=function(){if(s.display.all||(document.getElementsByClassName("video-controls")[0].style.display="none"),s.display.playControl){var e=document.getElementById("play-pause");e.addEventListener("click",function(){1==o.paused?o.play():o.pause()})}if(s.display.muteControl){var t=document.getElementById("mute");t.addEventListener("click",function(){0==o.muted?(o.muted=!0,t.style.backgroundImage="url(/public/images/player/player-mute.svg)"):(o.muted=!1,t.style.backgroundImage="url(/public/images/player/player-unmute.svg)")})}if(s.display.fullScreenControl){var n=document.getElementById("full-screen");n.addEventListener("click",function(){console.log("RequestFullScreen"),o.requestFullScreen?o.requestFullScreen():o.mozRequestFullScreen?o.mozRequestFullScreen():o.webkitRequestFullScreen?o.webkitRequestFullScreen():o.oRequestFullScreen?o.oRequestFullScreen():o.msRequestFullScreen&&o.msRequestFullScreen()})}if(s.display.seekControl){var l=document.getElementById("seek-bar");l.addEventListener("change",function(){function e(t){return o.seekable?(o.currentTime=t,!1):void setTimeout(function(){e(t)},500)}var t=o.duration*(l.value/100);s.control.progress?o.seekable?o.currentTime=t:e(t):console.log("Live, no seekable")})}if(s.display.volumeControl){var a=document.getElementById("volume-bar");a.addEventListener("change",function(){o.volume=a.value})}},r.playerHandler=function(){function e(){if(console.log(i()+" Player.Playing"),s.display.playControl){var e=document.getElementById("play-pause");e.style.backgroundImage="url(/public/images/player/player-pause.svg)"}}function t(){if(console.log(i()+" Player.Pause"),s.display.playControl){var e=document.getElementById("play-pause");e.style.backgroundImage="url(/public/images/player/player-play.svg)"}}function n(){console.log(i()+" Player.Play")}function l(){var e=100/o.duration*o.currentTime;if(s.display.seekControl){var t=document.getElementById("seek-bar");t.value=e}}function a(){console.log(i()+" Player.touchStart"),document.getElementsByClassName("video-controls")[0].style.opacity="0.9"}function r(){console.log(i()+" Player.touchEnd"),setTimeout(function(){document.getElementsByClassName("video-controls")[0].style.opacity="0"},2e3)}function i(){return(new Date).getTime()}o.addEventListener("play",n,!1),o.addEventListener("pause",t,!1),o.addEventListener("playing",e,!1),o.addEventListener("timeupdate",l,!1),o.addEventListener("touchstart",a,!1),o.addEventListener("touchend",r,!1)},r.updateVideoSize=function(e,t,n){function o(e,t){var n=null;return function(){var o=this,l=arguments;window.clearTimeout(n),n=window.setTimeout(function(){e.apply(o,l)},t)}}function l(){var o=e.parentNode.offsetHeight,l=e.parentNode.offsetWidth,a=t,r=n,i=o/r,s=l/a;s>i?(e.style.height="auto",e.style.width=l+"px"):(e.style.height=o+"px",e.style.width="auto")}document.addEventListener("DOMContentLoaded",l),window.onresize=function(){o(l(),0)},e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style["-webkit-transform"]="translate(-50%, -50%)",e.style["-ms-transform"]="translate(-50%, -50%)",e.style.transform="translate(-50%, -50%)",e.parentNode.style.overflow="hidden"},r.updateVideoUrl=function(e,t,n){function l(){console.log("updateVideoUrl.playingHandler"),o.removeEventListener("playing",l,!1)}function a(e){var t=500;return 0==o.readyState?(setTimeout(function(){a(e)},2*t),!1):null!==o.currentTime&&o.duration>e?(console.log("TO SEEK"),o.currentTime=e,n(!0),void 0):(console.log("Wait for data ... biu biu biu ."),setTimeout(function(){a(e)},t),!1)}if(e){var r=o.currentTime.toFixed(1);o.src=t,o.load(),o.play(),a(r),o.addEventListener("playing",l,!1)}else o.src=t,o.load(),n(!1)},a.init=function(){n.remove(),n.find("source").attr("src",c),s.control.autoplay&&n.attr("autoplay","autoplay"),s.control.preload&&n.attr("preload","auto"),s.control.loop&&n.attr("loop","loop"),t.prepend(n),r.updateContainerSize(),r.addPlayerControl(),r.updateControlStyle()},a.resume=function(){o.src=c,o.load(),r.updateVideoSize(o,1920,1080),r.controlHandler(),r.playerHandler()},a.updateVideoUrl=r.updateVideoUrl,a}};t.create=n.create});